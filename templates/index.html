<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تطبيق إزالة خلفية الصور - 2025</title>
    <!-- Bootstrap RTL CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap"
    />
    <!-- Custom CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='/css/style.css') }}"
    />
    <!-- Modern CSS for 2025 Design -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='/css/modern.css') }}"
    />
    <!-- Animations CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='/css/animations.css') }}"
    />
    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', path='/img/favicon.png') }}"
    />
    <!-- Meta Tags -->
    <meta
      name="description"
      content="تطبيق احترافي لإزالة خلفية الصور باستخدام الذكاء الاصطناعي - تصميم 2025"
    />
    <meta
      name="keywords"
      content="إزالة خلفية, تعديل صور, ذكاء اصطناعي, تصميم 2025"
    />
    <meta name="author" content="علي أحمد" />
    <meta name="theme-color" content="#4361ee" />
  </head>
  <body>
    <div class="container py-5">
      <header class="text-center mb-5 fade-in">
        <h1 class="display-4 fw-bold gradient-text mb-3">
          تطبيق إزالة خلفية الصور
        </h1>
        <p class="lead mb-4">
          قم برفع صورتك وإزالة الخلفية بنقرة واحدة مع أدوات تعديل متطورة
        </p>
        <div class="d-flex justify-content-center gap-3 mt-4 mb-4">
          <span
            class="badge bg-primary rounded-pill animated-border px-3 py-2 shadow-sm"
          >
            <i class="fas fa-paint-brush me-1"></i> تصميم 2025
          </span>
          <span
            class="badge bg-secondary rounded-pill animated-border px-3 py-2 shadow-sm"
          >
            <i class="fas fa-brain me-1"></i> الذكاء الاصطناعي
          </span>
          <span
            class="badge bg-success rounded-pill animated-border px-3 py-2 shadow-sm"
          >
            <i class="fas fa-sliders-h me-1"></i> تعديل متطور
          </span>
        </div>

        <!-- الآيات والأذكار -->
        <div
          class="quran-verse mt-3 mb-4 fade-in"
          style="animation-delay: 0.3s"
        >
          <div class="card border-0">
            <div class="card-body py-3">
              <i class="fas fa-quote-right text-primary opacity-50 me-2"></i>
              <p class="mb-0 gradient-text">{{ random_text }}</p>
              <i class="fas fa-quote-left text-primary opacity-50 ms-2"></i>
            </div>
          </div>
        </div>
      </header>

      <div class="row justify-content-center">
        <div class="col-md-10">
          <div class="card shadow-lg">
            <div class="card-body p-4">
              <!-- منطقة رفع الصورة -->
              <div
                id="upload-area"
                class="upload-area text-center p-5 mb-4 fade-in-up"
              >
                <div id="drop-area" class="drop-area mb-4 animated-border">
                  <div class="py-4">
                    <i
                      class="fas fa-cloud-upload-alt fa-4x mb-4 text-primary floating"
                    ></i>
                    <h4 class="gradient-text fw-bold mb-3">
                      اسحب وأفلت الصورة هنا
                    </h4>
                    <p class="text-muted">أو</p>
                    <input
                      type="file"
                      id="file-input"
                      accept="image/*"
                      class="d-none"
                    />
                    <input
                      type="file"
                      id="multiple-file-input"
                      class="d-none"
                      multiple
                      accept="image/*"
                    />
                    <div class="btn-group">
                      <button
                        id="browse-btn"
                        class="btn btn-primary btn-lg hover-float shimmer"
                      >
                        <i class="fas fa-image me-2"></i>اختر صورة
                      </button>
                      <label
                        for="multiple-file-input"
                        class="btn btn-secondary btn-lg hover-float shimmer mb-0"
                      >
                        <i class="fas fa-images me-2"></i>اختر عدة صور
                      </label>
                    </div>
                  </div>
                </div>

                <!-- منطقة معالجة المجلد -->
                <div id="folder-processing-area" class="d-none mt-4">
                  <h4 class="mb-3 gradient-text">معالجة الصور من المجلد</h4>
                  <div class="progress mb-3" style="height: 25px">
                    <div
                      id="folder-progress-bar"
                      class="progress-bar progress-bar-striped progress-bar-animated"
                      role="progressbar"
                      style="width: 0%"
                      aria-valuenow="0"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    >
                      0%
                    </div>
                  </div>
                  <div id="folder-progress-status" class="text-muted"></div>
                  <div id="processed-folder-images" class="row g-3 mt-3"></div>
                  <div class="text-center mt-4">
                    <!-- تم إزالة زر التحميل المجمع لصالح التحميل التلقائي لكل صورة على حدة -->
                  </div>
                </div>

                <div class="row mt-4">
                  <div
                    class="col-md-6 mb-3 fade-in-right"
                    style="animation-delay: 0.2s"
                  >
                    <div class="feature-card">
                      <div class="d-flex align-items-center">
                        <div class="feature-icon me-3">
                          <i class="fas fa-keyboard fa-lg"></i>
                        </div>
                        <div class="feature-content text-start">
                          <h5 class="mb-2 fw-bold">ميزة اللصق السريع</h5>
                          <p class="mb-0">
                            استخدم <kbd>Ctrl</kbd> + <kbd>V</kbd> للصق صورة من
                            الحافظة مباشرة
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    class="col-md-6 mb-3 fade-in-left"
                    style="animation-delay: 0.3s"
                  >
                    <div class="feature-card">
                      <div class="d-flex align-items-center">
                        <div class="feature-icon me-3">
                          <i class="fas fa-magic fa-lg"></i>
                        </div>
                        <div class="feature-content text-start">
                          <h5 class="mb-2 fw-bold">معالجة تلقائية</h5>
                          <p class="mb-0">
                            سيتم إزالة الخلفية تلقائياً بمجرد رفع الصورة
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  class="formats-info mt-4 fade-in"
                  style="animation-delay: 0.4s"
                >
                  <div class="d-flex justify-content-center gap-3">
                    <span class="format-badge"
                      ><i class="fas fa-check-circle me-1"></i> JPG</span
                    >
                    <span class="format-badge"
                      ><i class="fas fa-check-circle me-1"></i> PNG</span
                    >
                    <span class="format-badge"
                      ><i class="fas fa-check-circle me-1"></i> JPEG</span
                    >
                    <span class="format-badge"
                      ><i class="fas fa-check-circle me-1"></i> WEBP</span
                    >
                  </div>
                </div>
              </div>

              <!-- عرض الصور -->
              <div id="image-preview-container" class="row d-none scale-in">
                <div class="col-md-6 mb-4">
                  <div
                    class="card h-100 fade-in-right"
                    style="animation-delay: 0.1s"
                  >
                    <div class="card-header">
                      <div class="d-flex align-items-center">
                        <i class="fas fa-image me-2"></i>
                        <h5 class="mb-0">الصورة الأصلية</h5>
                      </div>
                    </div>
                    <div
                      class="card-body d-flex align-items-center justify-content-center"
                    >
                      <img
                        id="original-image"
                        class="img-fluid rounded shadow-sm"
                        alt="الصورة الأصلية"
                      />
                    </div>
                  </div>
                </div>
                <div class="col-md-6 mb-4">
                  <div
                    class="card h-100 fade-in-left"
                    style="animation-delay: 0.1s"
                  >
                    <div class="card-header">
                      <div class="d-flex align-items-center">
                        <i class="fas fa-magic me-2"></i>
                        <h5 class="mb-0">الصورة بعد إزالة الخلفية</h5>
                      </div>
                    </div>
                    <div class="card-body d-flex flex-column">
                      <!-- أدوات تعديل الصورة -->
                      <div
                        id="image-editor-toolbar"
                        class="image-editor-toolbar mb-3 d-none scale-in"
                      >
                        <div
                          class="editor-instructions alert alert-info mb-2 py-2 small"
                        >
                          <div class="d-flex align-items-center">
                            <i class="fas fa-info-circle me-2 fa-lg"></i>
                            <span
                              >يمكنك تعديل الصورة باستخدام الأدوات أدناه، ثم
                              اضغط على "تطبيق" لحفظ التغييرات</span
                            >
                          </div>
                        </div>
                        <div
                          class="d-flex flex-wrap justify-content-center gap-2"
                        >
                          <div class="tool-group">
                            <div class="tool-group-title small mb-1">
                              التدوير والقلب
                            </div>
                            <div class="btn-group">
                              <button
                                class="btn btn-sm btn-outline-primary"
                                id="rotate-left-btn"
                                title="تدوير لليسار"
                              >
                                <i class="fas fa-undo"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-primary"
                                id="rotate-right-btn"
                                title="تدوير لليمين"
                              >
                                <i class="fas fa-redo"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-primary"
                                id="flip-horizontal-btn"
                                title="قلب أفقي"
                              >
                                <i class="fas fa-arrows-alt-h"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-primary"
                                id="flip-vertical-btn"
                                title="قلب رأسي"
                              >
                                <i class="fas fa-arrows-alt-v"></i>
                              </button>
                            </div>
                          </div>

                          <div class="tool-group">
                            <div class="tool-group-title small mb-1">الحجم</div>
                            <div class="btn-group">
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="zoom-in-btn"
                                title="تكبير"
                              >
                                <i class="fas fa-search-plus"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="zoom-out-btn"
                                title="تصغير"
                              >
                                <i class="fas fa-search-minus"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="reset-transform-btn"
                                title="إعادة ضبط"
                              >
                                <i class="fas fa-sync"></i>
                              </button>
                            </div>
                          </div>

                          <div class="tool-group">
                            <div class="tool-group-title small mb-1">
                              التعديلات
                            </div>
                            <div class="btn-group">
                              <button
                                class="btn btn-sm btn-outline-info"
                                id="crop-btn"
                                title="قص"
                              >
                                <i class="fas fa-crop-alt"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-info"
                                id="brightness-btn"
                                title="سطوع"
                              >
                                <i class="fas fa-sun"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-info"
                                id="contrast-btn"
                                title="تباين"
                              >
                                <i class="fas fa-adjust"></i>
                              </button>
                            </div>
                          </div>

                          <div class="tool-group">
                            <div class="tool-group-title small mb-1">
                              موضع الصورة
                            </div>
                            <div class="btn-group">
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="center-image-btn"
                                title="توسيط الصورة"
                              >
                                <i class="fas fa-compress-arrows-alt"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="move-up-btn"
                                title="تحريك لأعلى"
                              >
                                <i class="fas fa-arrow-up"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="move-down-btn"
                                title="تحريك لأسفل"
                              >
                                <i class="fas fa-arrow-down"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="move-left-btn"
                                title="تحريك لليسار"
                              >
                                <i class="fas fa-arrow-left"></i>
                              </button>
                              <button
                                class="btn btn-sm btn-outline-secondary"
                                id="move-right-btn"
                                title="تحريك لليمين"
                              >
                                <i class="fas fa-arrow-right"></i>
                              </button>
                            </div>
                          </div>
                        </div>

                        <div class="d-flex justify-content-center mt-3">
                          <button
                            class="btn btn-sm btn-success me-2"
                            id="apply-changes-btn"
                            title="تطبيق التغييرات"
                          >
                            <i class="fas fa-check me-1"></i> تطبيق
                          </button>
                          <button
                            class="btn btn-sm btn-info me-2"
                            id="copy-image-toolbar-btn"
                            title="نسخ الصورة"
                          >
                            <i class="fas fa-copy me-1"></i> نسخ الصورة
                          </button>
                          <button
                            class="btn btn-sm btn-danger"
                            id="cancel-changes-btn"
                            title="إلغاء التغييرات"
                          >
                            <i class="fas fa-times me-1"></i> إلغاء
                          </button>
                        </div>
                      </div>

                      <!-- حاوية الصورة -->
                      <div
                        class="image-container d-flex align-items-center justify-content-center"
                      >
                        <div id="result-placeholder" class="text-center p-5">
                          <i
                            class="fas fa-image fa-3x text-muted mb-3 opacity-50"
                          ></i>
                          <p>سيتم عرض النتيجة هنا بعد المعالجة</p>
                        </div>
                        <div
                          id="image-editor-container"
                          class="d-none position-relative"
                        >
                          <img
                            id="result-image"
                            class="img-fluid rounded shadow-sm"
                            alt="الصورة بعد إزالة الخلفية"
                            style="
                              max-width: 100%;
                              display: block;
                              margin: 0 auto;
                            "
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- أزرار التحكم -->
                <div
                  class="col-12 text-center mt-4 mb-4 fade-in-up"
                  style="animation-delay: 0.2s"
                >
                  <div
                    class="action-buttons d-flex flex-wrap justify-content-center gap-3"
                  >
                    <button
                      id="remove-bg-btn"
                      class="btn btn-primary btn-lg hover-float shimmer"
                    >
                      <i class="fas fa-magic me-2"></i>إزالة الخلفية
                    </button>
                    <button
                      id="download-btn"
                      class="btn btn-success btn-lg d-none hover-float shimmer"
                    >
                      <i class="fas fa-download me-2"></i>تحميل الصورة
                    </button>
                    <button
                      id="copy-image-btn"
                      class="btn btn-info btn-lg d-none hover-float shimmer"
                    >
                      <i class="fas fa-copy me-2"></i>نسخ الصورة
                    </button>
                    <button
                      id="reset-btn"
                      class="btn btn-secondary btn-lg hover-float"
                    >
                      <i class="fas fa-redo me-2"></i>صورة جديدة
                    </button>
                  </div>
                </div>

                <!-- مؤشر التحميل -->
                <div id="loading" class="text-center mt-4 mb-4 d-none">
                  <div class="loading-animation">
                    <div class="spinner"></div>
                    <p class="mt-3 fw-bold">جاري معالجة الصورة...</p>
                    <p class="text-muted small">يرجى الانتظار قليلاً</p>
                  </div>
                </div>

                <!-- سجل الصور السابقة -->
                <div
                  class="col-12 mt-4 fade-in-up"
                  style="animation-delay: 0.3s"
                >
                  <div class="card">
                    <div class="card-header">
                      <div
                        class="d-flex justify-content-between align-items-center"
                      >
                        <div class="d-flex align-items-center">
                          <i class="fas fa-history me-2"></i>
                          <h5 class="mb-0">سجل الصور السابقة</h5>
                        </div>
                        <div
                          class="history-timer d-flex align-items-center gap-2"
                        >
                          <button
                            id="clear-history-btn"
                            class="btn btn-sm btn-outline-danger"
                            title="مسح السجل"
                          >
                            <i class="fas fa-trash-alt me-1"></i> مسح السجل
                          </button>
                          <span class="badge rounded-pill bg-info">
                            <i class="fas fa-clock me-1"></i>
                            <span>يتم الحفظ لمدة ساعة</span>
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="card-body">
                      <div id="image-history-container" class="row g-3">
                        <!-- سيتم إضافة الصور هنا ديناميكياً -->
                        <div
                          class="col-12 text-center py-4"
                          id="no-history-message"
                        >
                          <i
                            class="fas fa-images fa-3x text-muted mb-3 opacity-25"
                          ></i>
                          <p class="text-muted">لا توجد صور سابقة</p>
                          <small class="text-muted d-block"
                            >ستظهر هنا الصور التي قمت بمعالجتها سابقاً</small
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- معلومات إضافية -->
          <div
            class="card mt-4 shadow-sm fade-in"
            style="animation-delay: 0.4s"
          >
            <div class="card-body">
              <div class="row">
                <div class="col-md-7">
                  <h5 class="card-title gradient-text mb-3">
                    <i class="fas fa-info-circle me-2"></i>حول التطبيق
                  </h5>
                  <p>
                    هذا التطبيق يستخدم أحدث تقنيات الذكاء الاصطناعي لعام 2025
                    لإزالة خلفية الصور بدقة فائقة. يمكنك رفع صورة من جهازك أو
                    لصقها مباشرة من الحافظة، وسيقوم التطبيق بإزالة الخلفية
                    تلقائياً.
                  </p>
                  <div class="features-list">
                    <div class="feature-item d-flex align-items-center mb-2">
                      <div class="feature-icon me-2">
                        <i class="fas fa-check-circle text-success"></i>
                      </div>
                      <div>
                        يدعم معظم صيغ الصور الشائعة مثل JPG و PNG و WEBP
                      </div>
                    </div>
                    <div class="feature-item d-flex align-items-center mb-2">
                      <div class="feature-icon me-2">
                        <i class="fas fa-check-circle text-success"></i>
                      </div>
                      <div>
                        أدوات تعديل متطورة للصور (تدوير، قلب، تكبير، سطوع،
                        تباين)
                      </div>
                    </div>
                    <div class="feature-item d-flex align-items-center">
                      <div class="feature-icon me-2">
                        <i class="fas fa-check-circle text-success"></i>
                      </div>
                      <div>سجل للصور السابقة يحتفظ بها لمدة ساعة</div>
                    </div>
                  </div>
                  <div class="alert alert-info mt-3">
                    <i class="fas fa-lightbulb me-2"></i>
                    <strong>نصيحة:</strong> للحصول على أفضل النتائج، استخدم
                    صوراً ذات تباين واضح بين الموضوع والخلفية.
                  </div>
                </div>
                <div class="col-md-5">
                  <div class="tech-stack text-center mt-3 mt-md-0">
                    <h6 class="mb-3 text-muted">التقنيات المستخدمة</h6>
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                      <span class="badge bg-primary">Python</span>
                      <span class="badge bg-secondary">FastAPI</span>
                      <span class="badge bg-success">JavaScript</span>
                      <span class="badge bg-info">HTML5</span>
                      <span class="badge bg-warning text-dark">CSS3</span>
                      <span class="badge bg-danger">Bootstrap</span>
                      <span class="badge bg-dark">AI</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer - تصميم 2025 -->
    <footer class="text-center mt-5 mb-4 fade-in" style="animation-delay: 0.5s">
      <div class="footer-content py-4">
        <!-- زر إغلاق السيرفر -->
        <div class="mb-4">
          <button
            id="shutdown-server-btn"
            class="btn btn-outline-danger btn-sm hover-float"
            title="إغلاق السيرفر"
          >
            <i class="fas fa-power-off me-2"></i>إغلاق السيرفر
          </button>
        </div>

        <div class="social-links mb-4">
          <a
            href="#"
            class="btn btn-sm btn-outline-primary rounded-circle mx-2 hover-float"
            title="Facebook"
          >
            <i class="fab fa-facebook-f"></i>
          </a>
          <a
            href="#"
            class="btn btn-sm btn-outline-info rounded-circle mx-2 hover-float"
            title="Twitter"
          >
            <i class="fab fa-twitter"></i>
          </a>
          <a
            href="#"
            class="btn btn-sm btn-outline-danger rounded-circle mx-2 hover-float"
            title="Instagram"
          >
            <i class="fab fa-instagram"></i>
          </a>
          <a
            href="#"
            class="btn btn-sm btn-outline-dark rounded-circle mx-2 hover-float"
            title="GitHub"
          >
            <i class="fab fa-github"></i>
          </a>
        </div>
        <div class="footer-divider mb-3"></div>
        <p class="mb-2 fw-bold">
          <i class="fas fa-code me-2"></i>
          تم التطوير بواسطة
          <a href="#" class="text-decoration-none gradient-text">علي أحمد</a> |
          <a href="tel:01002241591" class="text-decoration-none hover-float"
            >01002241591</a
          >
        </p>
        <p class="mb-0 small text-muted">
          <i class="fas fa-copyright me-1"></i>
          جميع الحقوق محفوظة {{ current_year }} | تصميم 2025
        </p>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JSZip for folder processing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', path='/js/script.js') }}"></script>
    <!-- Modern JS -->
    <script src="{{ url_for('static', path='/js/modern.js') }}"></script>
  </body>
</html>
